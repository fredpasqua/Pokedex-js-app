let pokemonRepository=(function(){let pokemonList=[];let apiUrl='https://pokeapi.co/api/v2/pokemon/?limit=200';function add(pokemon){pokemonList.push(pokemon)}
function getAll(){return pokemonList}
function showModal(pokemon){let modalBody=$('.modal-body');let modalTitle=$('.modal-title');let modalHeader=$('.modal-header');modalHeader.empty();modalTitle.empty();modalBody.empty();let nameElement=$('<h1>'+pokemon.name.toUpperCase()+'</h1>');let imageElement=$('<img class="modal-img  w-100" style="height:225px;max-width: 225px;"> ');imageElement.attr('src',pokemon.imageUrl);let heightWeightElement=$('<p>'+'Height: '+pokemon.height+',   '+'Weight: '+pokemon.weight+'</p>');let alsoTypes=[];pokemon.types.forEach((element)=>{alsoTypes.push(' '+element.type.name)})
let typesElement=$('<p>'+'Type(s) : '+alsoTypes+'<p>');modalHeader.append(nameElement);modalBody.append(imageElement);modalBody.append(heightWeightElement);modalBody.append(typesElement)}
function pokeSearch(value){$('#pokemon-list').empty();pokemonList.forEach((pokemon)=>{if(pokemon.name.toLowerCase().includes(value.toLowerCase())){addListItem(pokemon)}})}
function addListItem(pokemon){let listCreator=document.querySelector('.list-group');listCreator.classList.add('list-unstyled')
let listItemCreator=document.createElement('li');listItemCreator.classList.add('group-list-item');let button=document.createElement('button');button.classList.add('btn','btn-primary');button.setAttribute('data-toggle','modal');button.setAttribute('data-target','#pokeModal')
button.innerText=pokemon.name;listCreator.appendChild(listItemCreator);listItemCreator.appendChild(button);button.addEventListener('click',function showDetails(){loadDetails(pokemon).then(function(){showModal(pokemon)})})}
function loadList(){return fetch(apiUrl).then(function(response){return response.json()}).then(function(json){json.results.forEach(function(item){let pokemon={name:item.name,detailsUrl:item.url};add(pokemon)})}).catch(function(e){console.error(e)})}
function loadDetails(item){let url=item.detailsUrl;return fetch(url).then(function(response){return response.json()}).then(function(details){item.imageUrl=details.sprites.front_default;item.types=details.types;item.height=details.height;item.weight=details.weight}).catch(function(e){console.error(e)})}
return{add:add,getAll:getAll,loadList:loadList,loadDetails:loadDetails,addListItem:addListItem,pokeSearch:pokeSearch,}})();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(pokemon){pokemonRepository.addListItem(pokemon)})})
